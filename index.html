<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Launchpad</title>
  <meta name="description" content="One-click launchpad with multi-source RSS readers, sports/news/tech quick links." />
  <style>
    :root { --bg:#0b1220; --card:#121a2b; --text:#dbe3f0; --muted:#9aa7bd; --border:#22304b; --shadow:0 12px 24px rgba(0,0,0,.5); --radius:16px; }
    @media (prefers-color-scheme: light) { :root { --bg:#f6f7fb; --card:#ffffff; --text:#1f2937; --muted:#6b7280; --border:#e5e7eb; --shadow:0 10px 24px rgba(2,8,20,.06);}}
    *{box-sizing:border-box} body{margin:0;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,Arial;background:var(--bg);color:var(--text);padding:24px}
    .container{max-width:1180px;margin:0 auto;display:grid;gap:18px}
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 24px;
      align-items: start;
    }
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    @media (max-width: 900px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
      .sidebar {
        flex-direction: row;
        gap: 12px;
      }
    }
    .sidebar h1 {
      margin: 0 0 18px 0;
      font-size: 32px;
      font-weight: bold;
      letter-spacing: 1px;
      text-align: left;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: flex-end; /* Only controls on right */
      min-width: 0;
    }
    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: nowrap;
      margin-left: auto;
    }
    h1, .controls {
      min-width: 0;
    }
    .controls{display:flex;gap:10px;flex-wrap:wrap}
    button{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:linear-gradient(180deg,rgba(99,102,241,.10),rgba(99,102,241,.02));color:var(--text);cursor:pointer;font-weight:600}
    .hint{font-size:12px;color:var(--muted)}
    .card{grid-column:span 12;background:linear-gradient(180deg,rgba(255,255,255,.02),transparent),var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    .section-head{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}
    .label{display:flex;align-items:center;gap:8px}
    .badge{margin-left:8px;padding:2px 8px;border-radius:999px;border:1px solid var(--border);font-size:12px;color:var(--muted)}
    .emoji{font-size:18px}
    .grid-2{display:grid;grid-template-columns:1fr;gap:18px}
    @media (min-width: 900px){ .grid-2{grid-template-columns:repeat(2,minmax(0,1fr));} }
    .rss-wrap{border:1px solid var(--border);border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,.04),transparent);overflow:auto;max-height:calc(64px * 4 + 2px)}
    .rss-list{list-style:none;margin:0;padding:0}
    .rss-item{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:start;padding:10px 12px;border-bottom:1px dashed var(--border)}
    .rss-item:last-child{border-bottom:none}
    .rss-item a{text-decoration:none;color:var(--text);font-weight:600}
    .rss-item a:hover{text-decoration:underline}
    .rss-item time{color:var(--muted);font-size:12px;white-space:nowrap}
    .rss-toolbar{display:flex;gap:8px;align-items:center}
    .rss-status{color:var(--muted);font-size:12px}
    footer{color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>
<body>
  <div class="main-grid">
    <!-- LEFT COLUMN -->
    <aside class="sidebar">
      <h1>Daily Launchpad</h1>
      <!-- Weather Section -->
      <section class="card weather-card">
        <div class="section-head">
          <div class="label"><span class="emoji">üå§Ô∏è</span><strong>Clive, IA Weather</strong></div>
        </div>
        <div id="weather" style="display:flex;align-items:center;gap:12px;font-size:22px;min-height:48px;">
          <span id="weather-temp">--¬∞</span>
          <span id="weather-icon" style="font-size:32px;">‚è≥</span>
          <span id="weather-desc" style="font-size:16px;color:var(--muted);"></span>
        </div>
      </section>
      <!-- MLB NL Central Standings Section -->
      <section class="card mlb-nlcentral-card">
        <div class="section-head">
          <div class="label"><span class="emoji">‚öæ</span><strong>NL Central Standings</strong></div>
        </div>
        <div id="mlb-nlcentral" style="font-size:15px;min-height:48px;">
          Loading‚Ä¶
        </div>
      </section>
    </aside>
    <!-- RIGHT COLUMN (existing content) -->
    <div class="container">
      <header>
        <div class="controls">
          <button id="refreshAll">Refresh All Feeds</button>
        </div>
      </header>
      <section class="card"><div class="section-head"><div class="label"><h2 style="margin:0;font-size:18px">Top News</h2><span class="badge">Latest first</span></div><div class="rss-toolbar"><button class="group-refresh" data-group="Top News">Refresh Group</button></div></div><div class="grid-2">
        <div id="sec-NYT" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üì∞</span><strong>NYT Headlines</strong></div>
            <div class="rss-toolbar">
              <button data-feed="NYT">Refresh</button>
              <span id="status-NYT" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-NYT" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-BBCWorld" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üåç</span><strong>BBC World</strong></div>
            <div class="rss-toolbar">
              <button data-feed="BBCWorld">Refresh</button>
              <span id="status-BBCWorld" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-BBCWorld" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-NPRTop" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üìª</span><strong>NPR Top Stories</strong></div>
            <div class="rss-toolbar">
              <button data-feed="NPRTop">Refresh</button>
              <span id="status-NPRTop" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-NPRTop" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-wpost" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üá∫üá∏</span><strong>Washington Post</strong></div>
            <div class="rss-toolbar">
              <button data-feed="wpost">Refresh</button>
              <span id="status-wpost" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-wpost" class="rss-list" aria-live="polite"></ul></div>
        </div>
      </div></section><section class="card"><div class="section-head"><div class="label"><h2 style="margin:0;font-size:18px">Politics</h2><span class="badge">Latest first</span></div><div class="rss-toolbar"><button class="group-refresh" data-group="Politics">Refresh Group</button></div></div><div class="grid-2">
        <div id="sec-Politico" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üèõÔ∏è</span><strong>POLITICO Picks</strong></div>
            <div class="rss-toolbar">
              <button data-feed="Politico">Refresh</button>
              <span id="status-Politico" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-Politico" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-WaPoPolitics" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üèõÔ∏è</span><strong>Washington Post ‚Äî Politics</strong></div>
            <div class="rss-toolbar">
              <button data-feed="WaPoPolitics">Refresh</button>
              <span id="status-WaPoPolitics" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-WaPoPolitics" class="rss-list" aria-live="polite"></ul></div>
        </div>
      </div></section><section class="card"><div class="section-head"><div class="label"><h2 style="margin:0;font-size:18px">Markets & Business</h2><span class="badge">Latest first</span></div><div class="rss-toolbar"><button class="group-refresh" data-group="Markets & Business">Refresh Group</button></div></div><div class="grid-2">
        <div id="sec-CNBCMarkets" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üíπ</span><strong>CNBC Top News & Analysis</strong></div>
            <div class="rss-toolbar">
              <button data-feed="CNBCMarkets">Refresh</button>
              <span id="status-CNBCMarkets" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-CNBCMarkets" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-FTWorld" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üíº</span><strong>Financial Times ‚Äî World</strong></div>
            <div class="rss-toolbar">
              <button data-feed="FTWorld">Refresh</button>
              <span id="status-FTWorld" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-FTWorld" class="rss-list" aria-live="polite"></ul></div>
        </div>
      </div></section><section class="card"><div class="section-head"><div class="label"><h2 style="margin:0;font-size:18px">Tech</h2><span class="badge">Latest first</span></div><div class="rss-toolbar"><button class="group-refresh" data-group="Tech">Refresh Group</button></div></div><div class="grid-2">
        <div id="sec-DF" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üöÄ</span><strong>Daring Fireball</strong></div>
            <div class="rss-toolbar">
              <button data-feed="DF">Refresh</button>
              <span id="status-DF" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-DF" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-Wired" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üîß</span><strong>WIRED</strong></div>
            <div class="rss-toolbar">
              <button data-feed="Wired">Refresh</button>
              <span id="status-Wired" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-Wired" class="rss-list" aria-live="polite"></ul></div>
        </div>
      </div></section><section class="card"><div class="section-head"><div class="label"><h2 style="margin:0;font-size:18px">Sports</h2><span class="badge">Latest first</span></div><div class="rss-toolbar"><button class="group-refresh" data-group="Sports">Refresh Group</button></div></div><div class="grid-2">
        <div id="sec-ESPN" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üèüÔ∏è</span><strong>ESPN Top Headlines</strong></div>
            <div class="rss-toolbar">
              <button data-feed="ESPN">Refresh</button>
              <span id="status-ESPN" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-ESPN" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-BBCSportUK" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">‚öΩ</span><strong>BBC Sport (UK)</strong></div>
            <div class="rss-toolbar">
              <button data-feed="BBCSportUK">Refresh</button>
              <span id="status-BBCSportUK" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-BBCSportUK" class="rss-list" aria-live="polite"></ul></div>
        </div>
        <div id="sec-Cubs" class="rss-card">
          <div class="section-head" style="margin-bottom:6px">
            <div class="label"><span class="emoji">üêª</span><strong>Cubs News</strong></div>
            <div class="rss-toolbar">
              <button data-feed="Cubs">Refresh</button>
              <span id="status-Cubs" class="rss-status">Loading‚Ä¶</span>
            </div>
          </div>
          <div class="rss-wrap"><ul id="list-Cubs" class="rss-list" aria-live="polite"></ul></div>
        </div>
      </div></section>
    </div>
  </div>

  <script>
    // WEATHER: Open-Meteo API for Clive, IA (41.6033, -93.8316)
    async function fetchWeather() {
      const weatherIconMap = {
        0: "‚òÄÔ∏è", 1: "üå§Ô∏è", 2: "‚õÖ", 3: "‚òÅÔ∏è", 45: "üå´Ô∏è", 48: "üå´Ô∏è",
        51: "üå¶Ô∏è", 53: "üå¶Ô∏è", 55: "üå¶Ô∏è", 56: "üåßÔ∏è", 57: "üåßÔ∏è",
        61: "üå¶Ô∏è", 63: "üåßÔ∏è", 65: "üåßÔ∏è", 66: "üåßÔ∏è", 67: "üåßÔ∏è",
        71: "üå®Ô∏è", 73: "üå®Ô∏è", 75: "‚ùÑÔ∏è", 77: "‚ùÑÔ∏è", 80: "üå¶Ô∏è",
        81: "üåßÔ∏è", 82: "üåßÔ∏è", 85: "üå®Ô∏è", 86: "üå®Ô∏è", 95: "‚õàÔ∏è",
        96: "‚õàÔ∏è", 99: "‚õàÔ∏è"
      };
      const weatherDescMap = {
        0: "Clear", 1: "Mainly clear", 2: "Partly cloudy", 3: "Overcast",
        45: "Fog", 48: "Depositing rime fog",
        51: "Light drizzle", 53: "Drizzle", 55: "Dense drizzle",
        56: "Freezing drizzle", 57: "Freezing drizzle",
        61: "Slight rain", 63: "Rain", 65: "Heavy rain",
        66: "Freezing rain", 67: "Freezing rain",
        71: "Slight snow", 73: "Snow", 75: "Heavy snow",
        77: "Snow grains", 80: "Slight showers", 81: "Showers",
        82: "Violent showers", 85: "Slight snow showers", 86: "Heavy snow showers",
        95: "Thunderstorm", 96: "Thunderstorm + hail", 99: "Thunderstorm + hail"
      };
      try {
        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=41.6033&longitude=-93.8316&current_weather=true&temperature_unit=fahrenheit');
        const data = await res.json();
        const temp = Math.round(data.current_weather.temperature);
        const code = data.current_weather.weathercode;
        document.getElementById('weather-temp').textContent = temp + "¬∞";
        document.getElementById('weather-icon').textContent = weatherIconMap[code] || "‚ùì";
        document.getElementById('weather-desc').textContent = weatherDescMap[code] || "";
      } catch {
        document.getElementById('weather-temp').textContent = "--¬∞";
        document.getElementById('weather-icon').textContent = "‚ö†Ô∏è";
        document.getElementById('weather-desc').textContent = "Weather unavailable";
      }
    }
    fetchWeather();
    setInterval(fetchWeather, 10 * 60 * 1000);

    // DJIA: Yahoo Finance API
    async function fetchDJIA() {
      try {
        const res = await fetch(PROXY + encodeURIComponent('https://query1.finance.yahoo.com/v7/finance/quote?symbols=%5EDJI'));
        const data = await res.json();
        const quote = data.quoteResponse.result[0];
        const value = quote.regularMarketPrice?.toLocaleString() ?? "--";
        const change = quote.regularMarketChange;
        const percent = quote.regularMarketChangePercent;
        const changeStr = (change !== undefined && percent !== undefined)
          ? `${change > 0 ? "‚ñ≤" : change < 0 ? "‚ñº" : ""} ${change.toFixed(2)} (${percent.toFixed(2)}%)`
          : "Unavailable";
        document.getElementById('djia-value').textContent = value;
        document.getElementById('djia-change').textContent = changeStr;
        document.getElementById('djia-change').style.color = change > 0 ? "#2ecc40" : change < 0 ? "#ff4136" : "inherit";
      } catch {
        document.getElementById('djia-value').textContent = "--";
        document.getElementById('djia-change').textContent = "Unavailable";
        document.getElementById('djia-change').style.color = "inherit";
      }
    }
    fetchDJIA();
    setInterval(fetchDJIA, 5 * 60 * 1000);

    const FEEDS = {
      "NYT": "https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml",
      "ReutersTop": "https://feeds.reuters.com/reuters/topNews",
      "APTop": "https://feeds.apnews.com/ap/topnews",
      "BBCWorld": "https://feeds.bbci.co.uk/news/world/rss.xml",
      "NPRTop": "https://feeds.npr.org/1001/rss.xml",
      "Politico": "https://www.politico.com/rss/politicopicks.xml",
      "WaPoPolitics": "https://feeds.washingtonpost.com/rss/politics",
      "wpost": "https://feeds.washingtonpost.com/rss/national",
      "WSJMarkets": "https://feeds.a.dj.com/rss/RSSMarketsMain.xml",
      "CNBCMarkets": "https://www.cnbc.com/id/100003114/device/rss/rss.html",
      "FTWorld": "https://www.ft.com/rss/world",
      "DF": "https://daringfireball.net/feeds/main",
      "Wired": "https://www.wired.com/feed/rss",
      "TheVerge": "https://www.theverge.com/rss/index.xml",
      "ESPN": "https://www.espn.com/espn/rss/news",
      "BR": "https://feeds.feedburner.com/bleacherreport/dFpM",
      "BBCSportUK": "https://feeds.bbci.co.uk/sport/rss.xml?edition=uk",
      "Cubs": "https://www.mlb.com/cubs/feeds/news/rss.xml",
    };
    let PROXY = "https://silent-sunset-890f.kpdfvg7cd7.workers.dev/workers.dev/?url=";
    const store = {};

    function fmtDate(ts){
      try { return new Date(ts).toLocaleString([], {month:'short', day:'numeric', hour:'2-digit', minute:'2-digit'}); }
      catch { return ''; }
    }
    function normalizeId(node){
      const guid = node.querySelector('guid')?.textContent?.trim();
      const link = node.querySelector('link')?.textContent?.trim();
      const title = node.querySelector('title')?.textContent?.trim();
      const pubDate = node.querySelector('pubDate')?.textContent?.trim();
      return guid || link || (title + '|' + pubDate);
    }
    function toItem(node){
      const title = node.querySelector('title')?.textContent?.trim() ?? 'Untitled';
      const link = node.querySelector('link')?.textContent?.trim() ?? '#';
      const pubDate = node.querySelector('pubDate')?.textContent?.trim() ?? '';
      const ts = Date.parse(pubDate || '') || Date.now();
      return { id: normalizeId(node), title, link, ts };
    }
    function render(key){
      const list = document.getElementById('list-' + key);
      const items = (store[key] || []).slice().sort((a,b)=>b.ts - a.ts);
      list.innerHTML = '';
      for(const it of items){
        const li = document.createElement('li'); li.className = 'rss-item';
        const a = document.createElement('a'); a.href = it.link; a.target = '_blank'; a.rel = 'noopener noreferrer'; a.textContent = it.title;
        const t = document.createElement('time'); t.textContent = fmtDate(it.ts);
        li.appendChild(a); li.appendChild(t);
        list.appendChild(li);
      }
    }
    async function loadFeed(key){
      const status = document.getElementById('status-' + key);
      if (status) status.textContent = 'Loading‚Ä¶';
      try {
        const res = await fetch(PROXY + encodeURIComponent(FEEDS[key]));
        if(!res.ok) throw new Error('Network ' + res.status);
        const xml = await res.text();
        const doc = new DOMParser().parseFromString(xml, 'text/xml');
        const nodes = Array.from(doc.querySelectorAll('item'));
        const fresh = nodes.map(toItem);
        store[key] = fresh; // Replace with only the latest items
        render(key);
        if (status) status.textContent = 'Updated ' + new Date().toLocaleTimeString();
      } catch (e){
        console.error(key, e);
        if (status) status.textContent = 'Could not load';
      }
    }
    document.querySelectorAll('button[data-feed]').forEach(btn => btn.addEventListener('click', () => loadFeed(btn.dataset.feed)));
    document.getElementById('refreshAll').addEventListener('click', () => { for(const key in FEEDS){ loadFeed(key); } });
    document.querySelectorAll('.group-refresh').forEach(btn => {
      btn.addEventListener('click', () => {
        btn.closest('section').querySelectorAll('button[data-feed]').forEach(b => loadFeed(b.dataset.feed));
      });
    });
    for(const key in FEEDS){ loadFeed(key); }
    setInterval(() => { for(const key in FEEDS){ loadFeed(key); } }, 1 * 60 * 1000);

    // Optional: use your own Cloudflare Worker proxy for reliability:
    // PROXY = "https://<your-worker-subdomain>.workers.dev/?url=";

    // MLB NL Central Standings (uses ESPN public API)
    async function fetchNLStandings() {
      const container = document.getElementById('mlb-nlcentral');
      try {
        const res = await fetch('https://site.api.espn.com/apis/site/v2/sports/baseball/mlb/standings?region=us&lang=en&contentorigin=espn');
        const data = await res.json();
        // Find NL Central
        let nlCentral = null;
        for (const conf of data.children || []) {
          if (conf.name && conf.name.includes('National League')) {
            for (const div of conf.children || []) {
              if (div.name && div.name.includes('Central')) {
                nlCentral = div.standings.entries;
                break;
              }
            }
          }
          if (nlCentral) break;
        }
        if (!nlCentral) throw new Error("Could not find NL Central standings.");
        // Build table
        let html = `<table style="width:100%;font-size:14px;border-collapse:collapse;">
          <thead><tr>
            <th style="text-align:left;">Team</th>
            <th>W</th>
            <th>L</th>
            <th>Pct</th>
            <th>GB</th>
          </tr></thead><tbody>`;
        for (const entry of nlCentral) {
          const t = entry.team;
          const stats = entry.stats.reduce((acc, s) => { acc[s.name] = s.value; return acc; }, {});
          html += `<tr>
            <td style="padding-right:6px;">${t.shortDisplayName || t.displayName}</td>
            <td>${stats.wins ?? '-'}</td>
            <td>${stats.losses ?? '-'}</td>
            <td>${stats.winPercent ? (stats.winPercent * 100).toFixed(1) : '-'}</td>
            <td>${stats.gamesBehind ?? '-'}</td>
          </tr>`;
        }
        html += `</tbody></table>`;
        container.innerHTML = html;
      } catch (e) {
        container.textContent = "Standings unavailable";
      }
    }
    fetchNLStandings();
    setInterval(fetchNLStandings, 10 * 60 * 1000);
  </script>

  <!-- Cloudflare Worker proxy template:
  export default {
    async fetch(request) {
      const url = new URL(request.url);
      const target = url.searchParams.get('url');
      if (!target) return new Response('Missing url', { status: 400 });
      const r = await fetch(target, { headers: { 'User-Agent': 'Mozilla/5.0' }});
      const contentType = r.headers.get('content-type');
      const body = await r.text();
      return new Response(body, {
        headers: {
          'Content-Type': contentType || 'application/json',
          'Access-Control-Allow-Origin': '*'
        }
      });
    }
  };
  -->
</body>
</html>
